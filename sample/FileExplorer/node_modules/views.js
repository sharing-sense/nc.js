'use strict'

const util = require('util');
const EventEmitter = require('events').EventEmitter;

function View(parent, tag, cls) {
    this.element = document.createElement(tag);

    this.element.className = cls;
    if (parent) {
        if (parent instanceof View)
            parent = parent.element;
        parent.appendChild(this.element);
    }

    this.element.onclick = () => {
        this.emit('click');
    };
}
util.inherits(View, EventEmitter);

View.prototype.getHTML = function() {
    return this.element.innerHTML;
}

View.prototype.setHTML = function(html) {
    this.element.innerHTML = html;
}

exports.View = View;

function ListItem(parent) {
    View.call(this, parent, 'div', 'ncjs-list-item');
}
util.inherits(ListItem, View);

exports.ListItem = ListItem;

function ListView(parent) {
    View.call(this, parent, 'div', 'ncjs-list-view');
}
util.inherits(ListView, View);

exports.ListView = ListView;

ListView.prototype.addItem = function(name) {
    var item = new ListItem(this);

    item.setHTML(name);

    var self = this;
    item.on('click', function() {
        self.emit('selectItem', this);
    });

    return item;
}

ListView.prototype.clearItems = function() {
    this.setHTML('');
}